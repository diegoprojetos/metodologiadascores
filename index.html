<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Exclusivo - Descubra Seu Potencial de Transformação</title>
    <meta name="description" content="Descubra em 2 minutos se você está pronta para emagrecer 5-12kg com o Cronograma das Cores">

    <!-- Arquivo de Trackeamento de Atividade -->
    <script src="./analytics.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00D084;
            --primary-dark: #00A66C;
            --secondary: #7C3AED;
            --accent: #FF6B9D;
            --dark: #1A1A2E;
            --light: #FFFFFF;
            --gray: #6B7280;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --gradient-primary: linear-gradient(135deg, #00D084 0%, #00A66C 100%);
            --gradient-secondary: linear-gradient(135deg, #7C3AED 0%, #EC4899 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B9D 0%, #FFA154 100%);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
        }

        .shape-1 {
            width: 300px;
            height: 300px;
            background: var(--gradient-warm);
            border-radius: 50%;
            top: -150px;
            left: -150px;
            animation: float 20s ease-in-out infinite;
        }

        .shape-2 {
            width: 200px;
            height: 200px;
            background: var(--gradient-primary);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            bottom: -100px;
            right: -100px;
            animation: float 15s ease-in-out infinite reverse;
        }

        .shape-3 {
            width: 150px;
            height: 150px;
            background: var(--gradient-secondary);
            border-radius: 50%;
            top: 50%;
            left: 80%;
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.2); opacity: 0.2; }
        }

        /* Main Container */
        .quiz-container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
            z-index: 1;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Progress Bar */
        .progress-header {
            background: var(--gradient-primary);
            padding: 30px;
            position: relative;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            margin-bottom: 15px;
        }

        .progress-step {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .progress-percentage {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 50px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 50px;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        .progress-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transition: all 0.3s;
        }

        .dot.active {
            background: white;
            transform: scale(1.3);
        }

        /* Quiz Content */
        .quiz-content {
            padding: 40px;
            min-height: 500px;
            position: relative;
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .start-icon {
            width: 120px;
            height: 120px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .start-icon i {
            font-size: 50px;
            color: white;
        }

        h1 {
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .start-description {
            color: var(--gray);
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .benefits-list {
            text-align: left;
            max-width: 400px;
            margin: 0 auto 40px;
        }

        .benefit {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: #F9FAFB;
            border-radius: 12px;
            transition: transform 0.3s;
        }

        .benefit:hover {
            transform: translateX(5px);
        }

        .benefit-icon {
            width: 30px;
            height: 30px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .benefit-icon i {
            color: white;
            font-size: 14px;
        }

        /* Question Screen */
        .question-screen {
            display: none;
            animation: slideInRight 0.5s ease;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-number {
            display: inline-block;
            background: var(--gradient-secondary);
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .question-title {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 40px;
            font-weight: 700;
            line-height: 1.3;
        }

        .answers-grid {
            display: grid;
            gap: 15px;
        }

        .answer-option {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 20px;
            padding: 20px 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .answer-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            transition: left 0.3s;
            z-index: 0;
        }

        .answer-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .answer-option.selected::before {
            left: 0;
        }

        .answer-option.selected {
            border-color: var(--primary);
            color: white;
        }

        .answer-radio {
            width: 24px;
            height: 24px;
            border: 2px solid #D1D5DB;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transition: all 0.3s;
        }

        .answer-option.selected .answer-radio {
            border-color: white;
            background: white;
        }

        .answer-radio::after {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .answer-option.selected .answer-radio::after {
            opacity: 1;
        }

        .answer-text {
            position: relative;
            z-index: 1;
            font-weight: 500;
        }

        /* Loading Screen */
        .loading-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        .loading-animation {
            width: 150px;
            height: 150px;
            margin: 0 auto 40px;
            position: relative;
        }

        .loading-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-radius: 50%;
        }

        .loading-circle:nth-child(1) {
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        .loading-circle:nth-child(2) {
            border-right-color: var(--secondary);
            animation: spin 1.5s linear infinite reverse;
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
        }

        .loading-circle:nth-child(3) {
            border-bottom-color: var(--accent);
            animation: spin 2s linear infinite;
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.5rem;
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 20px;
        }

        .loading-steps {
            max-width: 400px;
            margin: 0 auto;
        }

        .loading-step {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInUp 0.5s forwards;
        }

        .loading-step:nth-child(1) { animation-delay: 0.5s; }
        .loading-step:nth-child(2) { animation-delay: 1s; }
        .loading-step:nth-child(3) { animation-delay: 1.5s; }
        .loading-step:nth-child(4) { animation-delay: 2s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(20px);
            }
        }

        .step-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .step-icon i {
            color: white;
        }

        /* Result Screen */
        .result-screen {
            display: none;
            text-align: center;
            animation: zoomIn 0.5s ease;
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-badge {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            position: relative;
        }

        .result-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: pulse 2s ease-in-out infinite;
        }

        .result-circle i {
            font-size: 60px;
            color: white;
        }

        .confetti {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--primary);
            animation: confetti-fall 3s ease-in-out infinite;
        }

        .confetti-piece:nth-child(1) { left: 10%; animation-delay: 0s; background: var(--accent); }
        .confetti-piece:nth-child(2) { left: 30%; animation-delay: 0.3s; background: var(--secondary); }
        .confetti-piece:nth-child(3) { left: 50%; animation-delay: 0.6s; background: var(--warning); }
        .confetti-piece:nth-child(4) { left: 70%; animation-delay: 0.9s; background: var(--primary); }
        .confetti-piece:nth-child(5) { left: 90%; animation-delay: 1.2s; background: var(--danger); }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .result-title {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 900;
        }

        .result-subtitle {
            font-size: 1.3rem;
            color: var(--dark);
            margin-bottom: 30px;
        }

        .score-display {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .score-number {
            font-size: 5rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-label {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .result-details {
            text-align: left;
            margin: 30px 0;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: #F9FAFB;
            border-radius: 12px;
        }

        .detail-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .detail-icon i {
            color: white;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 18px 40px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 10px 30px rgba(0,208,132,0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,208,132,0.4);
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::after {
            width: 300px;
            height: 300px;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .btn-nav {
            padding: 12px 30px;
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-nav:hover {
            background: var(--primary);
            color: white;
        }

        .btn-nav:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Timer */
        .timer {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.05);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
            color: var(--gray);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .quiz-content {
                padding: 30px 20px;
            }
            
            .question-title {
                font-size: 1.4rem;
            }
            
            .result-title {
                font-size: 2rem;
            }
            
            .score-number {
                font-size: 4rem;
            }
            
            .btn {
                width: 100%;
                text-align: center;
            }
        }

        /* Footer */
        .quiz-footer {
            padding: 20px 40px;
            background: #F9FAFB;
            border-top: 1px solid #E5E7EB;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .footer-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .footer-item i {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>

    <!-- Main Quiz Container -->
    <div class="quiz-container">
        <!-- Progress Header -->
        <div class="progress-header">
            <div class="progress-info">
                <span class="progress-step">Pergunta <span id="currentQuestion">0</span> de 10</span>
                <span class="progress-percentage"><span id="progressPercent">0</span>%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="progress-dots">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>

        <!-- Quiz Content -->
        <div class="quiz-content">
            <!-- Timer (hidden initially) -->
            <div class="timer" style="display: none;">
                <i class="fas fa-clock"></i> <span id="timer">2:00</span>
            </div>

            <!-- Start Screen -->
            <div class="start-screen" id="startScreen">
                <div class="start-icon">
                    <i class="fas fa-clipboard-check"></i>
                </div>
                <h1>Descubra Seu Potencial de Transformação</h1>
                <p class="start-description">
                    Este quiz exclusivo de <strong>10 perguntas</strong> vai revelar se você está pronta 
                    para emagrecer de 5 a 12kg nos próximos 30 dias com o Cronograma das Cores.
                </p>
                
                <div class="benefits-list">
                    <div class="benefit">
                        <div class="benefit-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <span>Resultado personalizado em 2 minutos</span>
                    </div>
                    <div class="benefit">
                        <div class="benefit-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <span>Descubra seu % de compatibilidade</span>
                    </div>
                    <div class="benefit">
                        <div class="benefit-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <span>Plano de ação específico para você</span>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="startQuiz()">
                    COMEÇAR AGORA
                    <i class="fas fa-arrow-right" style="margin-left: 10px;"></i>
                </button>
            </div>

            <!-- Question Screen -->
            <div class="question-screen" id="questionScreen">
                <span class="question-number" id="questionNumber">Pergunta 1</span>
                <h2 class="question-title" id="questionTitle"></h2>
                <div class="answers-grid" id="answersGrid"></div>
                
                <div class="nav-buttons">
                    <button class="btn-nav" onclick="previousQuestion()" id="prevBtn">
                        <i class="fas fa-chevron-left"></i> Anterior
                    </button>
                    <button class="btn-nav" onclick="nextQuestion()" id="nextBtn" disabled>
                        Próxima <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Loading Screen -->
            <div class="loading-screen" id="loadingScreen">
                <div class="loading-animation">
                    <div class="loading-circle"></div>
                    <div class="loading-circle"></div>
                    <div class="loading-circle"></div>
                </div>
                <h2 class="loading-text">Analisando suas respostas...</h2>
                
                <div class="loading-steps">
                    <div class="loading-step">
                        <div class="step-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <span>Calculando compatibilidade metabólica</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">
                            <i class="fas fa-dna"></i>
                        </div>
                        <span>Analisando perfil hormonal</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">
                            <i class="fas fa-weight"></i>
                        </div>
                        <span>Estimando potencial de resultado</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <span>Preparando plano personalizado</span>
                    </div>
                </div>
            </div>

            <!-- Result Screen -->
            <div class="result-screen" id="resultScreen">
                <div class="result-badge">
                    <div class="result-circle">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="confetti">
                        <div class="confetti-piece"></div>
                        <div class="confetti-piece"></div>
                        <div class="confetti-piece"></div>
                        <div class="confetti-piece"></div>
                        <div class="confetti-piece"></div>
                    </div>
                </div>
                
                <h1 class="result-title">PARABÉNS!</h1>
                <p class="result-subtitle">Você está APROVADA para o Cronograma das Cores!</p>
                
                <div class="score-display">
                    <div class="score-number" id="scoreNumber">95%</div>
                    <div class="score-label">de compatibilidade com o método</div>
                </div>
                
                <div class="result-details">
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div>
                            <strong>Alto Potencial Metabólico:</strong> Seu corpo está pronto para queimar gordura aceleradamente
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <strong>Resultado Estimado:</strong> Potencial de perder <span id="weightLoss">5-8kg</span> em 30 dias
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <strong>Tempo Ideal:</strong> Você está no momento perfeito para começar
                        </div>
                    </div>
                </div>
                
                <a href="#" class="btn btn-primary" onclick="goToOffer()">
                    QUERO EMAGRECER ANTES DO FIM DO ANO
                    <i class="fas fa-arrow-right" style="margin-left: 10px;"></i>
                </a>
                
                <p style="margin-top: 20px; color: var(--gray);">
                    <i class="fas fa-lock"></i> Suas informações estão seguras
                </p>
            </div>
        </div>

        <!-- Quiz Footer -->
        <div class="quiz-footer">
            <div class="footer-item">
                <i class="fas fa-shield-alt"></i>
                <span>100% Seguro</span>
            </div>
            <div class="footer-item">
                <i class="fas fa-lock"></i>
                <span>Dados Protegidos</span>
            </div>
            <div class="footer-item">
                <i class="fas fa-users"></i>
                <span>+4.700 Aprovadas</span>
            </div>
        </div>
    </div>

    <script>
        let startTime = Date.now();

        // Quiz Questions
        const questions = [
            {
                question: "Qual é a sua faixa de idade?",
                answers: [
                    { text: "18-29 anos", value: 5 },
                    { text: "30-39 anos", value: 8 },
                    { text: "40-49 anos", value: 10 },
                    { text: "50+ anos", value: 7 }
                ]
            },
            {
                question: "Quantos quilos você deseja eliminar?",
                answers: [
                    { text: "3-5 kg", value: 7 },
                    { text: "6-10 kg", value: 10 },
                    { text: "11-20 kg", value: 9 },
                    { text: "Mais de 20 kg", value: 8 }
                ]
            },
            {
                question: "Há quanto tempo você luta contra o peso?",
                answers: [
                    { text: "Menos de 1 ano", value: 6 },
                    { text: "1-3 anos", value: 8 },
                    { text: "3-5 anos", value: 9 },
                    { text: "Mais de 5 anos", value: 10 }
                ]
            },
            {
                question: "Quantas dietas você já tentou nos últimos 2 anos?",
                answers: [
                    { text: "Nenhuma", value: 5 },
                    { text: "1-2 dietas", value: 7 },
                    { text: "3-5 dietas", value: 9 },
                    { text: "Mais de 5 dietas", value: 10 }
                ]
            },
            {
                question: "Como está seu nível de energia durante o dia?",
                answers: [
                    { text: "Ótimo, tenho energia o dia todo", value: 6 },
                    { text: "Razoável, mas canso à tarde", value: 8 },
                    { text: "Baixo, sempre estou cansada", value: 10 },
                    { text: "Muito baixo, exausta constantemente", value: 9 }
                ]
            },
            {
                question: "Você tem alguma condição de saúde relacionada ao peso?",
                answers: [
                    { text: "Não, estou saudável", value: 7 },
                    { text: "Pressão alta ou colesterol", value: 9 },
                    { text: "Pré-diabetes ou resistência à insulina", value: 10 },
                    { text: "Múltiplas condições", value: 8 }
                ]
            },
            {
                question: "Qual é sua maior dificuldade com alimentação?",
                answers: [
                    { text: "Como por ansiedade/estresse", value: 10 },
                    { text: "Não consigo controlar porções", value: 8 },
                    { text: "Belisco o dia todo", value: 9 },
                    { text: "Não tenho tempo para cozinhar", value: 7 }
                ]
            },
            {
                question: "Como você se sente em relação ao seu corpo hoje?",
                answers: [
                    { text: "Satisfeita, quero apenas melhorar", value: 5 },
                    { text: "Insatisfeita, mas motivada", value: 8 },
                    { text: "Muito insatisfeita e frustrada", value: 10 },
                    { text: "Desesperada para mudar", value: 9 }
                ]
            },
            {
                question: "Você está disposta a seguir um método por 30 dias?",
                answers: [
                    { text: "Sim, estou 100% comprometida", value: 10 },
                    { text: "Sim, mas tenho algumas dúvidas", value: 8 },
                    { text: "Talvez, depende do método", value: 6 },
                    { text: "Não tenho certeza", value: 4 }
                ]
            },
            {
                question: "O que você espera alcançar em 30 dias?",
                answers: [
                    { text: "Perder peso e me sentir melhor", value: 8 },
                    { text: "Transformar meu corpo completamente", value: 10 },
                    { text: "Criar hábitos saudáveis duradouros", value: 9 },
                    { text: "Recuperar minha autoestima", value: 9 }
                ]
            }
        ];

        // Quiz Variables
        let currentQuestionIndex = 0;
        let answers = {};
        let totalScore = 0;
        let timerInterval;

        // DOM Elements
        const startScreen = document.getElementById('startScreen');
        const questionScreen = document.getElementById('questionScreen');
        const loadingScreen = document.getElementById('loadingScreen');
        const resultScreen = document.getElementById('resultScreen');
        const progressBar = document.getElementById('progressBar');
        const progressPercent = document.getElementById('progressPercent');
        const currentQuestionSpan = document.getElementById('currentQuestion');
        const questionNumber = document.getElementById('questionNumber');
        const questionTitle = document.getElementById('questionTitle');
        const answersGrid = document.getElementById('answersGrid');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const dots = document.querySelectorAll('.dot');

        // Start Quiz
        function startQuiz() {
            startScreen.style.display = 'none';
            questionScreen.style.display = 'block';
            showQuestion(0);
            startTimer();

            if (window.FunnelAnalytics) {
                window.FunnelAnalytics.trackEvent('quiz_started', {
                    timestamp: Date.now()
                }
            )}
        }

        // Show Question
        function showQuestion(index) {
            currentQuestionIndex = index;
            const question = questions[index];
            
            // Update progress
            const progress = ((index + 1) / questions.length) * 100;
            progressBar.style.width = progress + '%';
            progressPercent.textContent = Math.round(progress);
            currentQuestionSpan.textContent = index + 1;
            
            // Update dots
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i <= index);
            });
            
            // Update question
            questionNumber.textContent = `Pergunta ${index + 1}`;
            questionTitle.textContent = question.question;
            
            // Generate answers
            answersGrid.innerHTML = '';
            question.answers.forEach((answer, i) => {
                const answerDiv = document.createElement('div');
                answerDiv.className = 'answer-option';
                answerDiv.innerHTML = `
                    <div class="answer-radio"></div>
                    <span class="answer-text">${answer.text}</span>
                `;
                answerDiv.onclick = () => selectAnswer(i, answer.value);
                
                // Check if previously selected
                if (answers[index] === i) {
                    answerDiv.classList.add('selected');
                }
                
                answersGrid.appendChild(answerDiv);
            });
            
            // Update navigation buttons
            prevBtn.style.visibility = index > 0 ? 'visible' : 'hidden';
            nextBtn.textContent = index === questions.length - 1 ? 'Ver Resultado' : 'Próxima';
            nextBtn.innerHTML = index === questions.length - 1 
                ? 'Ver Resultado <i class="fas fa-check"></i>' 
                : 'Próxima <i class="fas fa-chevron-right"></i>';
            nextBtn.disabled = answers[index] === undefined;
        }

        // Select Answer
        function selectAnswer(answerIndex, value) {
            answers[currentQuestionIndex] = answerIndex;
            
            // Update visual
            document.querySelectorAll('.answer-option').forEach((option, i) => {
                option.classList.toggle('selected', i === answerIndex);
            });
            
            // Enable next button
            nextBtn.disabled = false;
            
            // Store score
            questions[currentQuestionIndex].selectedValue = value;
        }

        // Navigation
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                showQuestion(currentQuestionIndex + 1);
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        }

        // Show Results
        function showResults() {
            questionScreen.style.display = 'none';
            loadingScreen.style.display = 'block';
            
            // Calculate score
            totalScore = 0;
            questions.forEach(q => {
                if (q.selectedValue) {
                    totalScore += q.selectedValue;
                }
            });
            
            // Convert to percentage (max possible score = 100)
            const percentage = Math.round((totalScore / 100) * 100);
            
            // Show result after loading
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                resultScreen.style.display = 'block';
                
                // Update score
                document.getElementById('scoreNumber').textContent = percentage + '%';
                
                // Update weight loss estimate based on score
                let weightLoss = '3-5kg';
                if (percentage >= 90) weightLoss = '10-12kg';
                else if (percentage >= 80) weightLoss = '8-10kg';
                else if (percentage >= 70) weightLoss = '6-8kg';
                else if (percentage >= 60) weightLoss = '5-7kg';
                
                document.getElementById('weightLoss').textContent = weightLoss;
                
                // Stop timer
                clearInterval(timerInterval);
            }, 3000);

            if (window.FunnelAnalytics) {
                // Pegar o score calculado (adapte conforme seu código)
                const score = document.getElementById('scoreNumber')?.textContent || '0%';
                
                window.FunnelAnalytics.trackEvent('quiz_completed', {
                    score: score,
                    questionsAnswered: 10,
                    timeToComplete: Date.now() - startTime // Você precisa definir startTime quando o quiz começar
                });
            }
        }

        // Timer
        function startTimer() {
            let seconds = 120; // 2 minutes
            const timerDisplay = document.getElementById('timer');
            const timerContainer = document.querySelector('.timer');
            
            timerContainer.style.display = 'block';
            
            timerInterval = setInterval(() => {
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerDisplay.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;
                
                if (seconds === 0) {
                    clearInterval(timerInterval);
                }
                
                seconds--;
            }, 1000);
        }

        // Go to Offer
        function goToOffer() {

            if (window.FunnelAnalytics) {
                window.FunnelAnalytics.trackEvent('quiz_cta_clicked', {
                    destination: 'sales_page',
                    quizScore: document.getElementById('scoreNumber')?.textContent || '0%'
                });
            }
            // Replace with your offer page URL
            setTimeout(() => {
                window.location.href = './metdascores.html';
            }, 100);
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (questionScreen.style.display === 'block') {
                if (e.key === 'ArrowRight' && !nextBtn.disabled) {
                    nextQuestion();
                } else if (e.key === 'ArrowLeft' && currentQuestionIndex > 0) {
                    previousQuestion();
                } else if (e.key >= '1' && e.key <= '4') {
                    const index = parseInt(e.key) - 1;
                    const answerOptions = document.querySelectorAll('.answer-option');
                    if (answerOptions[index]) {
                        answerOptions[index].click();
                    }
                }
            }
        });

        
        // 7. Rastrear abandono do quiz
        window.addEventListener('beforeunload', function() {
            if (window.FunnelAnalytics) {
                // Verificar em que etapa o usuário estava
                const currentQuestion = document.getElementById('currentQuestion')?.textContent || '0';
                
                window.FunnelAnalytics.trackEvent('quiz_abandoned', {
                    questionReached: currentQuestion,
                    timeSpent: Date.now() - startTime
                });
            }
        });
    </script>
</body>
</html>